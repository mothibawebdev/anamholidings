<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Anam Holdings: Cleaning Services | Booking & Invoice</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fafafa;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header {
      display: flex;
      align-items: center;
      gap: 10px;
      /*margin-bottom: 10px;*/
    }
    header img {
      height: 150px;
    }
    h1 {
      color: #601c14;
      margin: 0;
    }
    .container {
      display: flex;
      gap: 20px;
      width: 100%;
      max-width: 1500px;
    }
    .form-section, .invoice-section {
      background: white;
      border-radius: 10px;
      padding: 20px 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      flex: 1;
    }
    .form-group {
      margin-bottom: 10px;
    }
    .form-row {
      display: flex;
      gap: 30px;
    }
    .form-row .form-group.half {
      flex: 1;
    }

    label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    textarea{
      resize: none;
    }
    .note-box {
      background: #fff4cc;
      border-left: 6px solid #f1b800;
      padding: 10px;
      margin-bottom: 15px;
      font-size: 0.9em;
    }
    .invoice {
      white-space: pre-wrap;
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-family: monospace;
    }
    button {
      background-color: #601c14;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background-color: #8b2e22;
    }
    
.select2-container--default .select2-selection--multiple {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 4px;
    }
    
    @media (max-width: 900px) {
  .container {
    flex-direction: column;
  }
  .form-section, .invoice-section {
    width: 100%;
  }
}
  </style>
</head>
<body>

  <header>
    <img src="logo.png" alt="Anam Cleaning Services Logo">
    <!-- <h1>Anam Cleaning Services</h1> -->
  </header>

  <div class="container">
    <!-- Form Section -->
    <div class="form-section">
      <div class="note-box">
        <strong>Please note:</strong> This is a preliminary invoice. The final invoice will be confirmed onsite.<br><br>
        <strong>Note:</strong> Our cleaning services are available exclusively on weekends.
      </div>


      <div class="form-row">
  <div class="form-group half">
    <label>First Name</label>
    <input type="text" id="fname" required onchange="updateInvoice()">
  </div>
  <div class="form-group half">
    <label>Last Name</label>
    <input type="text" id="lname" required onchange="updateInvoice()">
  </div>
</div>
    <div class="form-row">
      <div class="form-group half">
        <label>Contact Number</label>
        <input type="text" id="contact" required onchange="updateInvoice()">
      </div>
      <div class="form-group half">
        <label>Email</label>
        <input type="email" id="email" onchange="updateInvoice()">
      </div>
    </div>
      
      <div class="form-group">
        <label>Residential Address *</label>
        <input type="text" id="address" required name="Residential Address" onchange="updateInvoice()">
      </div>

      <div class="form-group">
        <label>Service Required</label>
        <select id="service" required onchange="updateInvoice()">
          <option value="">Select</option>
          <option value="Standard Cleaning">Standard Cleaning</option>
          <option value="Deep Cleaning">Deep/Spring Cleaning</option>
          <option value="Move In/Out Cleaning">Move In/Out Cleaning</option>
          <option value="Moult Cleaning">Moult Cleaning</option>
          <option value="Event Cleaning">Event Cleaning</option>
        </select>
      </div>

      <div class="form-row">        
        <div class="form-group half">
          <label>Bedrooms</label>
          <input type="number" id="bedrooms" min="0" value="0" required onchange="updateInvoice()">
        </div>
        <div class="form-group half">
          <label>Bathrooms</label>
          <input type="number" id="bathrooms" min="0" value="0" onchange="updateInvoice()">
        </div>
      </div>

      <div class="form-group">
        <label>Bathroom Type</label>
        <select id="bathroomType" required onchange="updateInvoice()">
          <option value="">Select</option>
          <option value="Bathtub">Bathtub</option>
          <option value="Shower">Shower</option>
          <option value="Both">Both</option>
        </select>
      </div>
      <div class="form-group">
        <label for="addional_service">Optional Services (Inclusive with Deep Cleaning)</label>
        <select id="extras" multiple="multiple" style="width:100%;" onchange="updateInvoice()">
        <option value="Oven">Oven</option>
        <option value="Ironing">Ironing</option>
        <option value="Carpet">Carpet</option>
        <option value="Windows">Windows</option>
        <option value="Laundry">Laundry</option>
        <option value="Fridge">Fridge</option>
        <option value="Cabinet">Cabinet</option>
        <option value="Moult_Removal">Moult Removal</option>
      </select>
      </div>
          
      <div class="form-row">
        <div class="form-group half">
          <label>Date</label>
          <input type="date" id="date" required onchange="updateInvoice()">
        </div>
        <div class="form-group half">
          <label>Time</label>
          <input type="time" id="time" required onchange="updateInvoice()">
        </div>
          
        </div>
    </div>

    <!-- Invoice Section -->
    
    <div class="invoice-section">      
      <h2>Estimate: Invoice Preview</h2>
      <div id="invoiceOutput" class="invoice"></div>
      <br/>
      <div class="note-box">
        Download the estimate and send it to us by WhatsApp or email. We will call you there after to discuss it and might need some more information from you.
      </div>
      <button onclick="downloadPDF()">Download Invoice</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    function updateInvoice() {
      const fname = document.getElementById('fname').value || '';
      const lname = document.getElementById('lname').value || '';
      const contact = document.getElementById('contact').value || '';
      const email = document.getElementById('email').value || '';
      const address = document.getElementById('address').value || '';
      const service = document.getElementById('service').value || '';
      const bedrooms = parseInt(document.getElementById('bedrooms').value) || 0;
      const bathrooms = parseInt(document.getElementById('bathrooms').value) || 0;
      const bathroomType = document.getElementById('bathroomType').value;
      // const extras = parseInt(document.getElementById('extras').value) || 0;
      const date = document.getElementById('date').value;
      const time = document.getElementById('time').value;

      const extrasSelect = document.getElementById('extras');
      const selectedExtras = Array.from(extrasSelect.selectedOptions).map(opt => opt.value);

      const prices = {
        standardCleaning: 450,
        deepCleaning: 1200,
        perBedroom: 100,
        bathroomStandard: 80,
        bathroomDeep: 250,
        extras: {
          windows: 140,
          ironing: 35,
          laundry: 100,
          carpet: 60,
          fridge: 90,
          oven: 30,
          cabinet: 60,
          moult_removal: 300
        }
      };

      let subtotal = 0;

  // --- Service cost --- else if (service === "Moult Cleaning") subtotal += prices.deepCleaning + 300;

      if (service === "Standard Cleaning") subtotal += prices.standardCleaning;
      else if (service === "Deep Cleaning") subtotal += prices.deepCleaning;
      else if (service === "Move In/Out Cleaning") subtotal += prices.deepCleaning + 200; // small uplift
      else if (service === "Event Cleaning") subtotal += 800; {}

      subtotal += bedrooms * prices.perBedroom;

      if (service === "Deep Cleaning")
        subtotal += bathrooms * prices.bathroomDeep;
      else
        subtotal += bathrooms * prices.bathroomStandard;

      let extrasText = [];
        selectedExtras.forEach(extra => {
          //const key = extra.trim().toLowerCase();
          const key = extra.toLowerCase(); // normalize to lowercase
          const price = prices.extras[key] || 0;
          extrasText.push(`${extra} (R${price})`);
          subtotal += price;
      });

      const vat = subtotal * 0.15;
      const total = subtotal + vat;

      const invoiceText = `
Bill To:
${fname} ${lname}
Contact Number: ${contact}
Email: ${email}
Residential Address: ${address}

--------------------------------------
Service Type: ${service}
Bedrooms: ${bedrooms} @ R${prices.perBedroom}
Bathrooms: ${bathrooms} @ R${service === "Deep Cleaning" ? prices.bathroomDeep : prices.bathroomStandard}
Extras: ${extrasText.length ? extrasText.join(", ") : "None"}
--------------------------------------

Subtotal: R${subtotal.toFixed(2)}
VAT (15%): R${vat.toFixed(2)}

Estimated Total (Incl. VAT): R${total.toFixed(2)}
--------------------------------------
Date: ${date}
Time: ${time}
`;

      document.getElementById('invoiceOutput').textContent = invoiceText;
    }
    updateInvoice();

    async function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({
    unit: "mm",
    format: "a4"
  });

  // Load and insert logo (must be in same directory)
  const img = new Image();
  img.src = "logo.png";

  img.onload = function() {
    const pageWidth = doc.internal.pageSize.getWidth();

// Centered logo
const logoWidth = 50;
const logoHeight = 20;
const logoX = (pageWidth - logoWidth) / 2; // center horizontally
doc.addImage(img, "PNG", logoX, 10, logoWidth, logoHeight);

// Text below logo (centered)
doc.setFont("helvetica", "bold");
doc.setFontSize(14);
doc.text("Anam Cleaning Services", pageWidth / 2, 38, { align: "center" });

doc.setFont("helvetica", "normal");
doc.setFontSize(10);
doc.text("Professional Residential & Deep Cleaning Services", pageWidth / 2, 44, { align: "center" });
doc.text("Email: lungelwasgelem@gmail.com | Phone: +27 71 150 5808", pageWidth / 2, 49, { align: "center" });

    // Add header text
    // doc.setFont("helvetica", "bold");
    // doc.setFontSize(16);
    // doc.text("Cleaning Services", 55, 20);

    

    // Add line separator
    doc.setDrawColor(96, 28, 20);
    doc.line(10, 50, 200, 50);

    // Invoice title
    doc.setFontSize(14);
    doc.text("Estimate Invoice Summary", 10, 60);

    // Get invoice content
    const text = document.getElementById("invoiceOutput").textContent;

    // Wrap text and add after title
    const lineHeight = 6;
    const marginLeft = 10;
    const marginTop = 70;
    const lines = doc.splitTextToSize(text, 190);
    doc.text(lines, marginLeft, marginTop, { maxWidth: 190, lineHeightFactor: 1.5 });

    // Add footer
    const pageHeight = doc.internal.pageSize.height;
    doc.setFontSize(9);
    doc.setTextColor(100);
    doc.text(
      "Thank you for choosing Anam Cleaning Services!",
      10,
      pageHeight - 10
    );

    // Save PDF
    doc.save("AnamCleaningInvoice.pdf");
  };
}


    
  </script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
   <script>
    $(document).ready(function() {
      $('#extras').select2({
        placeholder: "Select extras",
        allowClear: true,
        tags: true
      });
    });
  </script>

</body>
</html>
